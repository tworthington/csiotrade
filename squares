wordlist: squares

digression sq@ "bmpread"

mapmaking first

squares first


definitions

\ ---------------------

5 constant #terrains
20000000000 constant infinite

\ Cost is really risk plus time for state changes (land to sea)

5 enums:      impassible opensea   city        coastalsea plains

here

( impassible) infinite , infinite , infinite , infinite , infinite ,
( opensea   ) infinite , 15       , 50       , 15       , 9000     ,
( city      ) infinite , 50       , 40       , 50       , 55       ,
( costalsea ) infinite , 10       , 50       , 10       , 9000     ,
( plains    ) infinite , 9000     , 55       , 9000     , 60       ,

10 constant cheapest


constant terraincosts

: typerow ( terrain -- addr)
    #terrains * cells
    terraincosts +
;

: typecol ( terrain addr -- cost)
    swap cells +
;

: orthogcost ( from to -- cost)
    sq@ swap sq@
    typerow ( dest addr)
    typecol @
;

: diagcost ( from to -- cost)
    sq@ swap sq@
    typerow ( dest addr)
    typecol @ 14142 10000 */
;

export{

: moveÂ£ ( from to -- cost)
    2dup - abs  ( from to diff)
    dup 1 = if drop orthogcost
    else width = if orthogcost
        else diagcost
        then then
;

}export

previous definitions